- id: washer_done
  alias: Washer is Done Announcement
  initial_state: 'off'
  trigger:
    platform: state
    entity_id: binary_sensor.washing_machine
    to: 'off'
  action:
  - service: script.audio_notify
    data:
      mplayer: "all_inside"
      message: "The washing machine is done running and ready to be unloaded!"


- id: dryer_done
  alias: Dryer is Done Announcement
  initial_state: 'off'
  trigger:
    platform: state
    entity_id: binary_sensor.dryer
    to: 'off'
  action:
  - service: script.audio_notify
    data:
      mplayer: "all_inside"
      message: "The dryer is done running and ready to be unloaded!"


- id: main_floor_vacuum_error
  alias: Main Floor Vacuum Error
  trigger:
  - entity_id: vacuum.neato
    platform: state
    to: error
  - entity_id: input_boolean.day_night
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: vacuum.neato
    state: error
  - condition: state
    entity_id: input_boolean.day_night
    state: 'on'
  action:
  - service: notify.alexa_media_everywhere
    data_template:
      message: >
        {% if is_state_attr('vacuum.neato', 'status', 'Brush stuck') %} 
          "Alert: The brush is stuck on the robo vac"
        {% else %}
          "Alert: something is wrong with the robo vac"
        {% endif %}
      data:
        type: "announce"

- id: '1589419206678'
  alias: Announcement - Mayson's Medicine
  trigger:
  - at: '07:30'
    platform: time
  - at: '12:30'
    platform: time
  - at: '17:30'
    platform: time
  condition: []
  action:
  - service: notify.alexa_media_inside
    data_template:
      message: "Just a friendly reminder, it is time for Mayson to take his {% if states('sensor.time') < '08:00' %}medication and {% endif %}fiber."
      data:
        type: "announce"

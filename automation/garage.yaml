- id: open_garage_door_for_chris
  alias: Open Garage Door for Chris
  initial_state: 'on'
  trigger:
  - platform: state
    entity_id: device_tracker.chris_phone_gps
    to: 'home'
  - platform: state
    entity_id: device_tracker.smartstart_706837
    to: 'home'
  condition:
    condition: or
    conditions:
    - condition: state
      entity_id: device_tracker.chris_phone_gps
      state: 'not_home'
    - condition: state
      entity_id: device_tracker.smartstart_706837
      state: 'not_home'
  action:
    - wait_template: "{{ is_state('device_tracker.chris_phone_gps', 'home') and is_state('device_tracker.smartstart_706837', 'home')}}"
      timeout: '00:02:00'
      continue_on_timeout: 'false'
    - service: cover.open_cover
      data:
        entity_id: cover.main_garage_door
    - service: notify.html5_chris_pixel_3
      data_template:
        message: "Opening the garage door at {{now()}}"

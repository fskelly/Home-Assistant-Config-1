garage_fridge_temp:
  name: Garage Fridge Temperature Alert
  title: Garage Fridge Temperature Alert!
  entity_id: binary_sensor.garage_fridge_temp_alert
  message: "Garage fridge temperature is {{ states('sensor.garage_fridge_temp') }} °F"
  skip_first: true
  repeat:
    - 1
    - 15
    - 30
    - 60
  data:
    url: https://ha.nuttytree.dynu.net/lovelace/garage_view
  notifiers:
    html5_chris_pixel_3


garage_freezer_temp:
  name: Garage Freezer Temperature Alert
  title: Garage Freezer Temperature Alert!
  entity_id: binary_sensor.garage_freezer_temp_alert
  message: "Garage freezer temperature is {{ states('sensor.garage_freezer_temp') }} °F"
  skip_first: true
  repeat:
    - 1
    - 15
    - 30
    - 60
  data:
    url: https://ha.nuttytree.dynu.net/lovelace/garage_view
  notifiers:
    html5_chris_pixel_3


storage_space_low:
  name: Storage Space is Low
  title: Storage Space is Low!
  entity_id: binary_sensor.storage_alert
  message: "Disk usage is at {{ trigger.to_state.state }}%"
  repeat:
    - 15
    - 30
    - 60
  data:
    url: https://ha.nuttytree.dynu.net/lovelace/system_view
  notifiers:
    html5_chris_pixel_3


time_to_upgrade:
  name: Time to Upgrade Home Assistant
  title: Time to Upgrade Home Assistant!
  entity_id: binary_sensor.time_to_upgrade
  message: 'The current version is {{ states("sensor.current_version") }} and the latest version is {{ states("sensor.latest_version") }}'
  repeat: 1440
  notifiers:
    html5_chris_pixel_3


device_offline:
  name: Device(s) Offline
  title: "Device{% if expand(states.binary_sensor) | selectattr('attributes.device_class', 'eq', 'connectivity') | selectattr('state', 'eq', 'off') | list | length > 1 %}s{% endif %} Offline!"
  entity_id: binary_sensor.device_offline
  state: "on"
  message: >
    {% if expand(states.binary_sensor) | selectattr('attributes.device_class', 'eq', 'connectivity') | selectattr('state', 'eq', 'off') | list | length == 1 %}
      The {{ expand(states.binary_sensor) | selectattr('attributes.device_class', 'eq', 'connectivity') | selectattr('state', 'eq', 'off') | map(attribute='name') | first | replace(' Status', '')}} is offline
    {% else %}
      The following devices are offline: {{ expand(states.binary_sensor) | selectattr('attributes.device_class', 'eq', 'connectivity') | selectattr('state', 'eq', 'off') | map(attribute='name') | list | join(', ') | replace(' Status', '')}}
    {% endif %}
  done_message: "All devices are back Online!"
  skip_first: true
  repeat:
    - 2
    - 30
    - 60
    - 240
  data:
    url: https://ha.nuttytree.dynu.net/lovelace/system_view
  notifiers:
    html5_chris_pixel_3
